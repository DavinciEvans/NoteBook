# 关系数据库

## 笛卡尔积

给定一组域（D1，D2……），他们的笛卡尔积为：$$D_1*D_2*...D_n= \{(d_1,d_2,...d_n) | d_i \in D_i, i=1,2,3....n\}$$

即为所有域取值的任意组合

笛卡尔积即为关系的域，可以看作一个二维表

**基数**：集合中所有元素的个数

举个例子：

D1 = { 1, 2, 3 }

D2 = { a, b, c }

D3 = { x, y, z }

则笛卡尔积 D1\*D2\*D3=

{(1,a,x),(1,a,y),(1,a,z),(2,a,x),(2,a,y)......(3,c,z)}

基数：3 \* 3 \* 3 = 27

**关系**即一个 D1，D2……Dn 的**子集**，用 R 表示

R：关系名

n：目或者度

关系当中的每个元素 d1，d2……dn 被称为**元组（即一行）**

关系当中的不同列称为**属性**

不同的列可以出自同一个域

## 码

**候选码**：如果有一个属性组（可以是一个也可以多个），能唯一标识一个元组，则该属性组为候选码

最简单的时候候选码只包含一个属性

极端的情况就是所有属性组都是这个关系模式的候选码，这种情况称为**全码**

**主码**：若一个关系有多个候选码，则挑选一个作为主码

**主属性**：候选码中的属性称为主属性，其他称为**非主属性**

n = 1: 单元关系，n = 2：双元关系

## 关系模式

关系模式为型，关系是值

关系模式记作 R(A1, A2, A3, ……)

R 为关系名称

A1，A2，A3，…… 为属性名

## 关系模型

### 关系的三类完整性约束

**实体完整性与参照完整性**：关系模型必须满足的约束条件，应该由系统自动支持

**用户定义的完整性**：应用领域需要遵循的完整性

### 实体完整性

- 主属性不能为空值

模型对应着现实世界，现实世界当中实体是可以区分的，即存在某一种标识。如果存在空值，则说明存在不可区分的个体，这不正确。

因此称为实体完整性

### 参照完整性

在关系模型当中的实体与实体间的联系都是用关系来描述的，自然存在关系与关系间的引用。

栗子🌰：

学生（姓名，班级，***专业号***，学号）

专业：（专业名，***专业号***）

学生关系当中的专业号来自专业关系的主码：专业号

学生关系的专业号必须是确实存在的专业的专业号

同时也可以实现一对多，多对多的关系

**外码**：如果有一个或多个属性不是 A 关系的主码，而是 B 关系的**主码**，则该属性组为 A 的外码

- A 为参照关系
- B为被参照关系或目标关系

上述例子当中，学生为参照关系，专业为被参照关系

注：A 与 B 不一定为不同关系，可以为相同的关系（我引用我自己）

**参照完整性的规则**：如果一个属性是 A 的外码，B 的主码，则：

- 或者取空值
- 或者取B的某个主码值
