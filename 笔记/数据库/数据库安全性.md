# 数据库安全

## 安全控制的常用方法

- 用户身份鉴别
- 存取控制
- 视图
- 审计
- 数据加密

## 自主存取控制（DAC）

- 用户对不同的数据对象有不同的存取权限
- 不同的用户对同一对象也有不同的权限
- 用户还可将其拥有的存取权限转授给其他用户

使用 `GRANT` 和 `REVOKE` 实现

### 权限授予：GRANT

```SQL
GRANT <权限>[,<权限>]...
ON <对象类型> <对象名>[,<对象类型> <对象名>]…
TO <用户>[,<用户>]...
[WITH GRANT OPTION];
```

WITH GRANT OPTION：如果有该子句，就可以转授权限，否则不行

也不允许循环授权

🌰：

把查询Student表权限授给用户U1

```SQL
GRANT SELECT
ON TABLE Student
TO U1;
```

把对Student表和Course表的全部权限授予用户U2和U3

```SQL
 GRANT ALL PRIVILEGES
 ON TABLE Student, Course
 TO U2, U3;
```

把对Student表和Course表的**全部权限**授予用户U2和U3

使用 ALL PRIVILEGES

```SQL
GRANT ALL PRIVILEGES
 ON TABLE Student, Course
 TO U2, U3;
```

把对表SC的查询权限授予所有用户

```SQL
GRANT SELECT
 ON TABLE SC
 TO PUBLIC;
```

把查询Student表和修改学生学号的权限授给用户U4

```SQL
 GRANT UPDATE(Sno), SELECT
ON TABLE Student
TO U4;
```

### 权限回收：REVOKE

```SQL
REVOKE <权限>[,<权限>]...
ON <对象类型> <对象名>[,<对象类型><对象名>]…
FROM <用户>[,<用户>]...[CASCADE | RESTRICT];
```

CASCADE：级联回收

RESTRICT：受限回收

🌰：

把用户U4修改学生学号的权限收回

```SQL
REVOKE UPDATE(Sno)
ON TABLE Student
FROM U4;
```

收回所有用户对表SC的查询权限

```SQL
REVOKE SELECT
ON TABLE SC
FROM PUBLIC;
```
